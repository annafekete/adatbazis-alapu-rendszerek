<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VideoFlow</title>
    <link rel="stylesheet" th:href="@{/css/playlist.css}">
    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get all tab buttons and content
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            // Add click event to each tab button
            tabButtons.forEach(button => {
                if(button.getAttribute('data-tab') !== 'createPlaylist') {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons and contents
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));

                    // Add active class to clicked button
                    this.classList.add('active');

                    // Show corresponding content
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            }
            });
            document.querySelectorAll('.delete-tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const playlistId = this.getAttribute('data-playlist-id');
                if (confirm('Are you sure you want to delete this playlist?')) {
                    fetch('/deletePlaylist/' + playlistId, {
                        method: 'DELETE'
                    })
                    .then(response => {
                        if (response.ok) {
                            // Remove tab and content from DOM or reload page
                            window.location.reload();
                        } else {
                            alert('Failed to delete playlist.');
                        }
                });
                
    }

    
        });
    });
            
    });
    </script>
</head>
<body>
<div class="container">

    <header>
        <div th:replace="~{fractions/navbar :: navbar}"></div>
    </header>

    <div class="content">
        <div class="playlist-tabs">
            <div class="tab-container">
                <div class="playlist-icon">
                     <img src="/images/playlists.jpg" alt="Playlist">
                </div>
                <div class="tabs">
                    <button class="tab-btn active" data-tab="kedveltek">Kedveltek</button>
                    <button class="tab-btn" th:each="playlist : ${playlists}" th:text="${playlist.playlistnev}" th:attr="data-tab='playlist' + ${playlist.playlistid}"></button>
                    <button class="tab-btn" data-tab="createPlaylist" th:onclick="'window.location.href=\'' + @{/createPlaylist} + '\';'">+</button>
                </div>
            </div>
        </div>

        <div class="playlist-content">
            <div th:each="playlist : ${playlists}" th:id="'playlist' + ${playlist.playlistid}" class="tab-content">
                <div class="placeholder-message">
                    <p th:text="'Playlist ' + ${playlist.playlistnev} + ' tartalma itt jelenik meg.'"></p>
                </div>
                <button class="delete-tab-btn" th:attr="data-playlist-id=${playlist.playlistid}">Delete Playlist</button>
            </div>
            

            <div id="playlist1" class="tab-content active">
                <div class="video-item">

                    <div class="video-thumbnail">
                        <img src="/images/cats.jpg" alt="Cat Video">
                        <div class="video-actions">
                            <button class="delete-btn"><img src="/images/trash.png" alt="Delete"></button>
                            <button class="add-btn"><img src="/images/plus.png" alt="Add"></button>
                        </div>
                    </div>
                    <div class="video-description">
                        <p>Description - We're celebrating International Cat Day by getting an adorably close look at the planet's former apex predator. Look at all these cute cats, falling like it's their job.</p>
                    </div>
                </div>

                <div class="video-item">
                    <div class="video-thumbnail">
                        <img src="/images/concert.webp" alt="Concert">
                        <div class="video-actions">
                            <button class="delete-btn"><img src="/images/trash.png" alt="Delete"></button>
                            <button class="add-btn"><img src="/images/plus.png" alt="Add"></button>
                        </div>
                    </div>
                    <div class="video-description">
                        <p>A concert is a live music performance where artists or bands entertain an audience. It can take place in small intimate venues, large stadiums, or outdoor festivals.</p>
                    </div>
                </div>

                <div class="video-item">
                    <div class="video-thumbnail">
                        <img src="/images/hamburger.jpg" alt="Hamburger">
                        <div class="video-actions">
                            <button class="delete-btn"><img src="/images/trash.png" alt="Delete"></button>
                            <button class="add-btn"><img src="/images/plus.png" alt="Add"></button>
                        </div>
                    </div>
                    <div class="video-description">
                        <p>A hamburger is a popular and delicious fast-food dish consisting of a cooked ground beef patty placed inside a sliced bun. It is often accompanied by toppings like lettuce, tomato, cheese, pickles, onions, and various condiments such as ketchup, mustard, or mayonnaise.</p>
                    </div>
                </div>

                <div class="video-item">
                    <div class="video-thumbnail">
                        <img src="/images/programming.webp" alt="Programming">
                        <div class="video-actions">
                            <button class="delete-btn"><img src="/images/trash.png" alt="Delete"></button>
                            <button class="add-btn"><img src="/images/plus.png" alt="Add"></button>
                        </div>
                    </div>
                    <div class="video-description">
                        <p>Programming is the process of writing, testing, and maintaining code to create software, applications, and websites. It involves using programming languages like Python, JavaScript, C++, or Java to give computers instructions and automate tasks.</p>
                    </div>
                </div>

                <div class="video-item">
                    <div class="video-thumbnail">
                        <img src="/images/books.webp" alt="Books">
                        <div class="video-actions">
                            <button class="delete-btn"><img src="/images/trash.png" alt="Delete"></button>
                            <button class="add-btn"><img src="/images/plus.png" alt="Add"></button>
                        </div>
                    </div>
                    <div class="video-description">
                        <p>Books are a gateway to knowledge, imagination, and adventure. They come in various genres, from fiction and fantasy to history and science.</p>
                    </div>
                </div>
            </div>

            <div id="playlist2" class="tab-content">
                <div class="placeholder-message">
                    <p>Playlist02 content will appear here.</p>
                </div>
            </div>

            <div id="playlist3" class="tab-content">
                <div class="placeholder-message">
                    <p>Playlist03 content will appear here.</p>
                </div>
            </div>

            <div id="playlist4" class="tab-content">
                <div class="placeholder-message">
                    <p>Playlist04 content will appear here.</p>
                </div>
            </div>
        </div>
    </div>
<footer>
    <div th:replace="~{fractions/footer :: footer}"></div>
</footer>

</div>

<script src="/js/script.js"></script>
</body>
</html>