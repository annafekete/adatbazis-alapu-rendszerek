<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Felhasználók kezelése</title>
    <style>
        body { font-family: Arial; margin: 2rem; background-color: #92c1e9}
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #aaa; padding: 0.5rem; }
        form { margin-top: 1rem; }
    </style>
</head>
<body>

<h1>Felhasználók kezelése</h1>

<h2>Új felhasználó</h2>
<form th:action="@{/crud/add}" method="post" th:object="${newUser}">
    Email: <input th:field="*{email}" required><br>
    Felhasználónév: <input th:field="*{felhasznalonev}" required><br>
    Jelszó: <input th:field="*{jelszo}" required><br>
    Szerepkör:
    <select th:field="*{szerepkor}" required>
        <option th:each="role : ${roles}" th:value="${role}" th:text="${role.szerepkornev}"></option>
    </select><br>
    <button type="submit">Hozzáadás</button>
</form>

<h2>Felhasználók listája</h2>
<table>
    <thead>
    <tr><th>Email</th><th>Felhasználónév</th><th>Szerepkör</th><th>Művelet</th></tr>
    </thead>
    <tbody>
    <tr th:each="user : ${users}">
        <form th:action="@{/crud/edit/{email}(email=${user.email})}" method="post">
            <td th:text="${user.email}"></td>
            <td><input type="text" name="felhasznalonev" th:value="${user.felhasznalonev}" required></td>
            <td>
                <select name="szerepkorId">
                    <option th:each="role : ${roles}"
                            th:value="${role.szerepkorid}"
                            th:text="${role.szerepkornev}"
                            th:selected="${user.szerepkor.szerepkorid == role.szerepkorid}"></option>
                </select>
            </td>
            <td>
                <input type="text" name="jelszo" placeholder="Új jelszó">
                <button type="submit">Mentés</button>
                <a th:href="@{/crud/delete/{email}(email=${user.email})}" onclick="return confirm('Biztosan törölni szeretnéd?')">Törlés</a>
            </td>
        </form>
    </tr>
    </tbody>
</table>


</body>
</html>
